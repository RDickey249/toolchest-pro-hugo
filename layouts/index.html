{{ define "main" }}
<div class="home-hero">
    <div class="hero-content">
        <h1>{{ .Site.Title }}</h1>
        <p class="hero-tagline">{{ .Site.Params.description }}</p>
        <div class="hero-actions">
            <a href="/categories/" class="btn btn-primary">Browse All Categories</a>
        </div>
    </div>
</div>

<section class="featured-tools">
    <h2>Featured Tools</h2>
    <div class="grid grid-4">
        {{ $affiliateTools := where .Site.RegularPages "Params.affiliate" true }}
        {{ if $affiliateTools }}
            {{ range first 12 $affiliateTools }}
            <div class="card tool-card">
                <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                <p class="tool-tagline">{{ .Params.tagline }}</p>
                <div class="tool-meta">
                    <span class="category-tag">{{ .Params.category }}</span>
                    {{ if .Params.subcategory }}
                    <span class="subcategory-tag">{{ .Params.subcategory }}</span>
                    {{ end }}
                </div>
            </div>
            {{ end }}
        {{ else }}
            <!-- Fallback: Show some recent tools if affiliate filter fails -->
            {{ range first 12 .Site.RegularPages }}
            {{ if .Params.affiliate }}
            <div class="card tool-card">
                <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                <p class="tool-tagline">{{ .Params.tagline }}</p>
                <div class="tool-meta">
                    <span class="category-tag">{{ .Params.category }}</span>
                    {{ if .Params.subcategory }}
                    <span class="subcategory-tag">{{ .Params.subcategory }}</span>
                    {{ end }}
                </div>
            </div>
            {{ end }}
            {{ end }}
        {{ end }}
    </div>
</section>

<section class="categories-preview">
    <div class="section-header">
        <h2>Browse by Category</h2>
        <a href="/categories/" class="view-all-link">View All Categories â†’</a>
    </div>
    <div class="grid grid-3">
        {{ range first 6 .Site.Taxonomies.categories }}
        <div class="card category-card">
            <h3><a href="{{ "/categories/" | relURL }}{{ .Page.Title | urlize }}/">{{ .Page.Title }}</a></h3>
            <p class="tool-count">{{ len .Pages }} tools</p>
        </div>
        {{ end }}
    </div>
</section>
{{ end }}